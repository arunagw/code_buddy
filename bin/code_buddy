#!/usr/bin/env ruby
$LOAD_PATH.unshift File.join(File.dirname(__FILE__), '..', 'lib')
require 'rubygems'
require 'code_buddy'
require 'code_buddy/server'
require 'daemons'

command = ARGV.shift

case command
when "start"
  CodeBuddy::Server.start
when "stop"
  CodeBuddy::Server.stop
when "exec"
  start if not running?
  CodeBuddy::Server.exec stdin
  launchy open
end